<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Mom.Baby || Play - Bolalar uchun eng yaxshi mahsulotlar</title>
    <!-- Meta tags -->
    <meta name="description" content="Bolalar uchun sifatli o'yinchoqlar, kiyimlar va parvarish mahsulotlari do'koni">
    <link rel="shortcut icon" href="./photo_2025-05-29_20-08-19.jpg" type="image/x-icon">
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"> 
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-pink: #FF6B9D;
            --primary-teal: #4ECDC4;
            --accent-blue: #45B7D1;
            --accent-yellow: #FFE66D;
            --accent-green: #96CEB4;
            --accent-orange: #FECA57;
            --dark-gray: #2C3E50;
            --light-gray: #F8F9FA;
            --white: #FFFFFF;
        }

        [data-theme="dark"] {
            --primary-pink: #FF6B9D;
            --primary-teal: #4ECDC4;
            --accent-blue: #45B7D1;
            --accent-yellow: #FFE66D;
            --accent-green: #96CEB4;
            --accent-orange: #FECA57;
            --dark-gray: #F8F9FA;
            --light-gray: #2C3E50;
            --white: #1A1A1A;
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: var(--dark-gray);
            background-color: var(--light-gray);
            overflow-x: hidden;
            transition: all 0.3s ease;
        }

        .gradient-bg {
            background: linear-gradient(135deg, var(--primary-pink) 0%, var(--primary-teal) 50%, var(--accent-blue) 100%);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Theme Toggle */
        .theme-toggle {
            position: fixed;
            top: 100px;
            right: 20px;
            z-index: 1500;
            background: var(--white);
            border: 2px solid var(--primary-pink);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            transform: scale(1.1);
        }

        /* Language Selector */
        .language-selector {
            position: fixed;
            top: 160px;
            right: 20px;
            z-index: 1500;
            background: var(--white);
            border: 2px solid var(--primary-teal);
            border-radius: 25px;
            padding: 8px 12px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .language-selector:hover {
            transform: scale(1.05);
        }

        /* Header Styles */
        .header {
            position: sticky;
            top: 0;
            z-index: 1000;
            padding: 15px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 20px;
        }

        .logo {
            font-size: 24px;
            font-weight: 700;
            color: white;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo i {
            animation: bounce 2s infinite;
        }

        .search-container {
            flex: 1;
            max-width: 500px;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 12px 50px 12px 20px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            outline: none;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            background: var(--white);
            color: var(--dark-gray);
        }

        .search-btn {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--primary-pink);
            cursor: pointer;
            font-size: 18px;
        }

        .cart-btn {
            background: white;
            color: var(--primary-pink);
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            position: relative;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .cart-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .cart-count {
            background: #FF4757;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            position: absolute;
            top: -8px;
            right: -8px;
        }

        /* Hero Section */
        .hero {
            padding: 80px 0;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y="50" font-size="60" opacity="0.1">🧸</text><text x="70" y="20" font-size="40" opacity="0.1">👶</text><text x="20" y="80" font-size="50" opacity="0.1">🎈</text><text x="80" y="90" font-size="60" opacity="0.1">🎪</text></svg>') repeat;
        }

        .hero-content {
            position: relative;
            z-index: 2;
        }

        .hero h1 {
            font-size: 4rem;
            font-weight: 700;
            margin-bottom: 20px;
            animation: float 3s ease-in-out infinite;
        }

        .hero .accent-text {
            color: var(--accent-yellow);
        }

        .hero p {
            font-size: 1.5rem;
            margin-bottom: 30px;
            opacity: 0.9;
        }

        .cta-btn {
            background: white;
            color: var(--primary-pink);
            border: none;
            padding: 15px 30px;
            font-size: 1.2rem;
            font-weight: 600;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .cta-btn:hover {
            transform: scale(1.05);
        }

        /* Categories */
        .categories {
            background: var(--white);
            padding: 20px 0;
            position: sticky;
            top: 80px;
            z-index: 999;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .category-filters {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            overflow-x: auto;
            padding: 0 10px;
        }

        .category-btn {
            background: var(--white);
            border: 2px solid #E0E0E0;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            white-space: nowrap;
            min-width: fit-content;
            color: var(--dark-gray);
        }

        .category-btn:hover,
        .category-btn.active {
            background: var(--primary-pink);
            color: white;
            border-color: var(--primary-pink);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 107, 157, 0.3);
        }

        /* Mobile Category Select */
        .mobile-category-select {
            display: none;
            width: 100%;
            padding: 12px;
            border: 2px solid var(--primary-pink);
            border-radius: 25px;
            font-size: 16px;
            background: var(--white);
            color: var(--dark-gray);
            margin: 10px 0;
        }

        /* Rating Section */
        .rating-section {
            background: var(--white);
            padding: 30px;
            border-radius: 20px;
            margin: 30px 0;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .rating-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--dark-gray);
        }

        .current-rating {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .rating-stars {
            display: flex;
            gap: 5px;
        }

        .star {
            font-size: 2rem;
            color: #ddd;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .star.active,
        .star:hover {
            color: #FFD700;
        }

        .rating-average {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-pink);
        }

        .rating-count {
            color: #666;
            font-size: 1.1rem;
        }

        /* Products Grid */
        .products-section {
            padding: 60px 0;
        }

        .section-title {
            text-align: center;
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 50px;
            color: var(--dark-gray);
        }

        .section-title .accent {
            color: var(--primary-pink);
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .product-card {
            background: var(--white);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            position: relative;
        }

        .product-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }

        .product-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .product-card:hover .product-image {
            transform: scale(1.1);
        }

        .product-info {
            padding: 20px;
        }

        .product-id {
            background: var(--primary-pink);
            color: white;
            font-size: 12px;
            font-weight: 600;
            padding: 4px 8px;
            border-radius: 12px;
            position: absolute;
            top: 10px;
            left: 10px;
        }

        .product-name {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--dark-gray);
        }

        .product-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-bottom: 15px;
        }

        .product-tag {
            background: #F1F3F5;
            color: #6C757D;
            font-size: 11px;
            padding: 3px 8px;
            border-radius: 10px;
        }

        .product-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .product-price {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary-pink);
        }

        .add-to-cart {
            background: var(--primary-pink);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 15px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .add-to-cart:hover {
            background: #E55A8B;
            transform: scale(1.05);
        }

        /* Statistics Section */
        .stats-section {
            background: linear-gradient(135deg, var(--primary-pink), var(--primary-teal));
            color: white;
            padding: 40px 0;
            text-align: center;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }

        .stat-card {
            text-align: center;
        }

        .stat-number {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        /* Footer */
        .footer {
            background: var(--dark-gray);
            color: white;
            padding: 60px 0 20px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-section h4 {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 20px;
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section ul li {
            margin-bottom: 10px;
        }

        .footer-section ul li a {
            color: #BDC3C7;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-section ul li a:hover {
            color: var(--primary-pink);
        }

        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .social-links a {
            color: #BDC3C7;
            font-size: 1.5rem;
            transition: color 0.3s ease;
        }

        .social-links a:hover {
            color: var(--primary-pink);
        }

        .footer-bottom {
            border-top: 1px solid #34495E;
            padding-top: 20px;
            text-align: center;
            color: #BDC3C7;
        }

        /* Cart Sidebar */
        .cart-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            display: none;
        }

        .cart-overlay.show {
            display: block;
        }

        .cart-sidebar {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100vh;
            background: var(--white);
            box-shadow: -2px 0 10px rgba(0,0,0,0.3);
            z-index: 2001;
            transition: right 0.3s ease;
            overflow-y: auto;
        }

        .cart-sidebar.open {
            right: 0;
        }

        .cart-header {
            padding: 20px;
            border-bottom: 1px solid #E0E0E0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .cart-header h3 {
            font-size: 1.5rem;
            font-weight: 700;
            color: white;
        }

        .close-cart {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: white;
            padding: 5px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .close-cart:hover {
            background: rgba(255,255,255,0.2);
            transform: scale(1.1);
        }

        .cart-items {
            padding: 20px;
            min-height: 300px;
        }

        .cart-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 0;
            border-bottom: 1px solid #F1F3F5;
        }

        .cart-item-image {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 10px;
        }

        .cart-item-info {
            flex: 1;
        }

        .cart-item-name {
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--dark-gray);
        }

        .cart-item-price {
            color: var(--primary-pink);
            font-weight: 700;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .quantity-btn {
            background: #F1F3F5;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .quantity-btn:hover {
            background: var(--primary-pink);
            color: white;
        }

        .quantity {
            font-weight: 600;
            min-width: 30px;
            text-align: center;
            color: var(--dark-gray);
        }

        .remove-item {
            background: none;
            border: none;
            color: #E74C3C;
            cursor: pointer;
            font-size: 1.2rem;
            padding: 5px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .remove-item:hover {
            background: rgba(231, 76, 60, 0.1);
            transform: scale(1.1);
        }

        .cart-footer {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--white);
            padding: 20px;
            border-top: 1px solid #E0E0E0;
        }

        .cart-total {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 15px;
            text-align: center;
            color: var(--primary-pink);
        }

        .checkout-btn {
            width: 100%;
            background: var(--primary-pink);
            color: white;
            border: none;
            padding: 15px;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .checkout-btn:hover {
            background: #E55A8B;
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 3000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-overlay.show {
            display: flex;
        }

        .modal {
            background: var(--white);
            max-width: 500px;
            width: 100%;
            border-radius: 20px;
            overflow: hidden;
            max-height: 90vh;
            overflow-y: auto;
            border: 3px solid var(--primary-pink);
        }

        .modal-header {
            padding: 20px;
            background: var(--primary-pink);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-content {
            padding: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: var(--dark-gray);
        }

        .form-input,
        .form-select,
        .form-textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #E0E0E0;
            border-radius: 8px;
            font-size: 16px;
            outline: none;
            transition: border-color 0.3s ease;
            background: var(--white);
            color: var(--dark-gray);
        }

        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            border-color: var(--primary-pink);
        }

        .order-summary {
            background: var(--light-gray);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: var(--dark-gray);
        }

        .summary-total {
            font-weight: 700;
            font-size: 1.2rem;
            border-top: 1px solid #E0E0E0;
            padding-top: 10px;
            margin-top: 10px;
        }

        .empty-cart {
            text-align: center;
            padding: 60px 20px;
            color: #6C757D;
        }

        .empty-cart i {
            font-size: 4rem;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .success-modal {
            text-align: center;
            padding: 40px;
        }

        .success-icon {
            font-size: 4rem;
            color: #27AE60;
            margin-bottom: 20px;
        }

        .loading {
            text-align: center;
            padding: 40px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--primary-pink);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        /* Rating Modal */
        .rating-modal {
            text-align: center;
            padding: 30px;
        }

        .rating-modal h3 {
            margin-bottom: 20px;
            color: var(--dark-gray);
        }

        .rating-input {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }

        .rating-input .star {
            font-size: 3rem;
            color: #ddd;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .rating-input .star.active,
        .rating-input .star:hover {
            color: #FFD700;
            transform: scale(1.1);
        }

        /* Animations */
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2.5rem;
            }

            .hero p {
                font-size: 1.2rem;
            }

            .section-title {
                font-size: 2rem;
            }

            .header-content {
                flex-direction: column;
                gap: 15px;
            }

            .search-container {
                max-width: 100%;
                order: 3;
                width: 100%;
            }

            .cart-btn {
                order: 2;
            }

            .category-filters {
                display: none;
            }

            .mobile-category-select {
                display: block;
            }

            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
                gap: 20px;
            }

            .cart-sidebar {
                width: 100%;
                right: -100%;
            }

            .footer-content {
                grid-template-columns: 1fr;
                gap: 30px;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
            }

            .stat-number {
                font-size: 2rem;
            }

            .theme-toggle,
            .language-selector {
                position: relative;
                top: auto;
                right: auto;
                margin: 5px;
            }

            .rating-input .star {
                font-size: 2rem;
            }
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
<!-- Theme Toggle -->
<div class="theme-toggle" id="themeToggle">
    <i class="fas fa-moon" id="themeIcon"></i>
</div>

<!-- Language Selector -->
<div class="language-selector" id="languageSelector">
    <span id="currentLang">🇺🇿 UZ</span>
</div>

<!-- Rating Modal -->
<div id="ratingModal" class="modal-overlay">
    <div class="modal">
        <div class="modal-header">
            <h3 data-translate="rate_service">Xizmatni baholang</h3>
            <button id="closeRating" style="background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer;">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="rating-modal">
            <p data-translate="rate_experience">Bizning xizmatimizni baholang:</p>
            <div class="rating-input" id="ratingInput">
                <span class="star" data-rating="1">⭐</span>
                <span class="star" data-rating="2">⭐</span>
                <span class="star" data-rating="3">⭐</span>
                <span class="star" data-rating="4">⭐</span>
                <span class="star" data-rating="5">⭐</span>
            </div>
            <button class="checkout-btn" id="submitRating" data-translate="submit_rating">Baholashni yuborish</button>
        </div>
    </div>
</div>

<!-- Cart Overlay -->
<div id="cartOverlay" class="cart-overlay">
    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-header gradient-bg">
            <h3 data-translate="cart">Savatcha</h3>
            <button class="close-cart" id="closeCart">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="cart-items" id="cartItems">
            <div class="empty-cart">
                <i class="fas fa-shopping-bag"></i>
                <p data-translate="cart_empty">Savatcha bo'sh</p>
            </div>
        </div>
        <div class="cart-footer" id="cartFooter" style="display: none;">
            <div class="cart-total" id="cartTotal">Jami: 0 so'm</div>
            <button class="checkout-btn" id="checkoutBtn">
                <i class="fas fa-shopping-bag"></i> <span data-translate="checkout">Xarid qilish</span>
            </button>
        </div>
    </div>
</div>

<!-- Checkout Modal -->
<div id="checkoutModal" class="modal-overlay">
    <div class="modal">
        <div class="modal-header">
            <h3 data-translate="fill_details">Ma'lumotlarni to'ldiring</h3>
            <button id="closeCheckout" style="background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer;">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-content">
            <form id="checkoutForm">
                <div class="form-group">
                    <label class="form-label" data-translate="full_name">Ism Sharif *</label>
                    <input type="text" class="form-input" id="customerName" data-translate-placeholder="enter_full_name" placeholder="To'liq ismingizni kiriting" required>
                </div>
                <div class="form-group">
                    <label class="form-label" data-translate="phone_number">Telefon raqami *</label>
                    <input type="tel" class="form-input" id="customerPhone" placeholder="+998 90 123 45 67" required>
                </div>
                <div class="form-group">
                    <label class="form-label" data-translate="region">Hudud/Manzil *</label>
                    <select class="form-select" id="customerRegion" required>
                        <option value="" data-translate="select_region">Hududni tanlang</option>
                        <option value="toshkent">Toshkent</option>
                        <option value="samarqand">Samarqand</option>
                        <option value="buxoro">Buxoro</option>
                        <option value="namangan">Namangan</option>
                        <option value="fargona">Farg'ona</option>
                        <option value="andijon">Andijon</option>
                        <option value="qashqadaryo">Qashqadaryo</option>
                        <option value="surxondaryo">Surxondaryo</option>
                        <option value="xorazm">Xorazm</option>
                        <option value="qoraqalpogiston">Qoraqalpog'iston</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label" data-translate="additional_notes">Qo'shimcha ma'lumot</label>
                    <textarea class="form-textarea" id="customerNotes" rows="3" data-translate-placeholder="enter_address_details" placeholder="Manzilingizni aniqroq tarzda kiriting! Qo'shimcha taklif va istaklaringiz bo'lsa marhamat biz sizni eshitamiz yozing!"></textarea>
                </div>
                <div class="order-summary">
                    <h4 data-translate="order_details">Buyurtma tafsilotlari:</h4>
                    <div id="orderSummary"></div>
                    <div class="summary-total">
                        <div class="summary-item">
                            <span data-translate="total_amount">Jami summa:</span>
                            <span id="orderTotal">0 so'm</span>
                        </div>
                    </div>
                </div>
                <button type="submit" class="checkout-btn">
                    <i class="fas fa-paper-plane"></i> <span data-translate="place_order">Buyurtma berish</span>
                </button>
            </form>
        </div>
    </div>
</div>

<!-- Success Modal -->
<div id="successModal" class="modal-overlay">
    <div class="modal">
        <div class="modal-header">
            <h3 data-translate="order_successful">Buyurtma muvaffaqiyatli!</h3>
            <button id="closeSuccess" style="background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer;">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="success-modal">
            <i class="fas fa-check-circle success-icon"></i>
            <h3 data-translate="thank_you">Rahmat!</h3>
            <p data-translate="order_received">Buyurtmangiz qabul qilindi. Tez orada operatorlarimiz siz bilan bog'lanishadi.</p>
            <button class="checkout-btn" id="successOk" style="margin-top: 20px;" data-translate="ok">Yaxshi</button>
        </div>
    </div>
</div>

<!-- Header -->
<header class="header gradient-bg">
    <div class="container">
        <div class="header-content">
            <a href="#" class="logo">
                <i class="fas fa-baby"></i>
                MomBaby||Play
            </a>
            <div class="search-container">
                <input type="text" class="search-input" id="searchInput" data-translate-placeholder="search_products" placeholder="Mahsulot qidirish... (masalan: #o'yinchoq, #kiyim)">
                <button class="search-btn" id="searchBtn">
                    <i class="fas fa-search"></i>
                </button>
            </div>
            <button class="cart-btn" id="cartBtn">
                <i class="fas fa-shopping-cart"></i>
                <span data-translate="cart">Savatcha</span>
                <span class="cart-count" id="cartCount">0</span>
            </button>
        </div>
    </div>
</header>

<!-- Hero -->
<section class="hero gradient-bg">
    <div class="container">
        <div class="hero-content">
            <h1><span data-translate="for_children">Bolalar uchun</span><br><span class="accent-text" data-translate="best_products">Eng Yaxshi</span> <span data-translate="products">Mahsulotlar</span></h1>
            <p data-translate="hero_description">100+ dan ortiq sifatli o'yinchoq va bolalar ehtiyojlari</p>
            <button class="cta-btn" onclick="scrollToProducts()">
                <span data-translate="start_shopping">Xarid qilishni boshlash</span>
                <i class="fas fa-arrow-down" style="margin-left: 10px;"></i>
            </button>
        </div>
    </div>
</section>

<!-- Rating Section -->
<section class="rating-section" id="ratingSection">
    <div class="container">
        <h2 class="rating-title" data-translate="customer_rating">Mijozlar baholari</h2>
        <div class="current-rating">
            <div class="rating-average" id="averageRating">5.0</div>
            <div class="rating-stars" id="displayStars">
                ⭐⭐⭐⭐⭐
            </div>
            <div class="rating-count" id="ratingCount">(0 <span data-translate="reviews">baholash</span>)</div>
        </div>
    </div>
</section>

<!-- Statistics -->
<section class="stats-section">
    <div class="container">
        <h2 style="font-size: 2.5rem; margin-bottom: 20px;" data-translate="our_results">Bizning Natijalarmiz</h2>
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number" id="totalOrders">0</div>
                <div class="stat-label" data-translate="total_orders">Buyurtmalar soni</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalProducts">100+</div>
                <div class="stat-label" data-translate="products_count">Mahsulotlar soni</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">24/7</div>
                <div class="stat-label" data-translate="customer_service">Mijozlar xizmati</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">100%</div>
                <div class="stat-label" data-translate="quality_guarantee">Sifat kafolati</div>
            </div>
        </div>
    </div>
</section>

<!-- Categories -->
<section class="categories" id="categories">
    <div class="container">
        <!-- Desktop Category Buttons -->
        <div class="category-filters">
            <button class="category-btn active" data-category="all">
                <i class="fas fa-th-large"></i>
                <span data-translate="all">Barchasi</span>
            </button>
            <button class="category-btn" data-category="baby">
                <i class="fas fa-baby"></i>
                <span data-translate="baby_products">Chaqaloq mahsulotlari</span>
            </button>
            <button class="category-btn" data-category="toys">
                <i class="fas fa-gamepad"></i>
                <span data-translate="toys">O'yinchoqlar</span>
            </button>
            <button class="category-btn" data-category="clothing">
                <i class="fas fa-tshirt"></i>
                <span data-translate="clothing">Kiyimlar</span>
            </button>
            <button class="category-btn" data-category="care">
                <i class="fas fa-heart"></i>
                <span data-translate="care">Parvarish</span>
            </button>
        </div>
        
        <!-- Mobile Category Select -->
        <select class="mobile-category-select" id="mobileCategorySelect">
            <option value="all" data-translate="all">Barchasi</option>
            <option value="baby" data-translate="baby_products">Chaqaloq mahsulotlari</option>
            <option value="toys" data-translate="toys">O'yinchoqlar</option>
            <option value="clothing" data-translate="clothing">Kiyimlar</option>
            <option value="care" data-translate="care">Parvarish</option>
        </select>
    </div>
</section>

<!-- Products -->
<section class="products-section" id="products">
    <div class="container">
        <h2 class="section-title"><span data-translate="our">Bizning</span> <span class="accent" data-translate="products">Mahsulotlarimiz</span></h2>
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p data-translate="loading_products">Mahsulotlar yuklanmoqda...</p>
        </div>
        <div class="products-grid" id="productsGrid"></div>
    </div>
</section>

<!-- Footer -->
<footer class="footer">
    <div class="container">
        <div class="footer-content">
            <div class="footer-section">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 20px;">
                    <div class="gradient-bg" style="padding: 10px; border-radius: 10px;">
                        <i class="fas fa-baby" style="color: white; font-size: 1.5rem;"></i>
                    </div>
                    <h4>MomBaby||Play</h4>
                </div>
                <p style="color: #BDC3C7;" data-translate="footer_description">Bolalar uchun eng sifatli va xavfsiz mahsulotlar. Har bir oilaning baxtiga hissa qo'shamiz.</p>
                <p style="color: #BDC3C7;">Xurmat ila Xudayberganova Raziya</p>
            </div>
            <div class="footer-section">
                <h4 data-translate="quick_links">Tezkor havolalar</h4>
                <ul>
                    <li><a href="#home" data-translate="home">Bosh sahifa</a></li>
                    <li><a href="#products" data-translate="products">Mahsulotlar</a></li>
                    <li><a href="#contact" data-translate="contact">Aloqa</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4 data-translate="categories">Kategoriyalar</h4>
                <ul>
                    <li><a href="#" data-translate="baby_products">Bolalar mahsulotlari</a></li>
                    <li><a href="#" data-translate="toys">O'yinchoqlar</a></li>
                    <li><a href="#" data-translate="clothing">Kiyimlar</a></li>
                    <li><a href="#" data-translate="care">Parvarish</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4 data-translate="contact">Aloqa</h4>
                <p style="color: #BDC3C7; margin-bottom: 10px;">
                    <i class="fas fa-phone" style="margin-right: 10px;"></i>+998 94 116 41 44
                </p>
                <p style="color: #BDC3C7; margin-bottom: 10px;">
                    <i class="fas fa-envelope" style="margin-right: 10px;"></i>info@mombaby.uz
                </p>
                <p style="color: #BDC3C7; margin-bottom: 20px;">
                    <i class="fas fa-map-marker-alt" style="margin-right: 10px;"></i>Xorazm, Xiva
                </p>
                <div class="social-links">
                    <a href="#"><i class="fab fa-telegram"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 MomBaby||Play. <span data-translate="all_rights_reserved">Barcha huquqlar himoyalangan.</span></p>
        </div>
    </div>
</footer>

<!-- JavaScript -->
<script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js'; 
    import { getFirestore, collection, getDocs } from 'https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js'; 

    const firebaseConfig = {
        apiKey: "AIzaSyBZrr5XUqX4mZcVjtSWlXvvFoI58sLvUL4",
        authDomain: "mom-baby-play.firebaseapp.com",
        projectId: "mom-baby-play",
        storageBucket: "mom-baby-play.appspot.com",
        messagingSenderId: "395079738085",
        appId: "1:395079738085:web:ff5dc999196e4bc4cf2a0c"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    let cart = [];
    let products = [];
    let categories = [];
    let currentCategory = 'all';
    let searchQuery = '';
    let orderCount = 0;
    let currentRating = 0;
    let ratingData = { total: 0, count: 0 };
    let currentLanguage = 'uz';
    let darkMode = false;

    // Translations
    const translations = {
        uz: {
            rate_service: "Xizmatni baholang",
            rate_experience: "Bizning xizmatimizni baholang:",
            submit_rating: "Baholashni yuborish",
            cart: "Savatcha",
            cart_empty: "Savatcha bo'sh",
            checkout: "Xarid qilish",
            fill_details: "Ma'lumotlarni to'ldiring",
            full_name: "Ism Sharif *",
            enter_full_name: "To'liq ismingizni kiriting",
            phone_number: "Telefon raqami *",
            region: "Hudud/Manzil *",
            select_region: "Hududni tanlang",
            additional_notes: "Qo'shimcha ma'lumot",
            enter_address_details: "Manzilingizni aniqroq tarzda kiriting!",
            order_details: "Buyurtma tafsilotlari:",
            total_amount: "Jami summa:",
            place_order: "Buyurtma berish",
            order_successful: "Buyurtma muvaffaqiyatli!",
            thank_you: "Rahmat!",
            order_received: "Buyurtmangiz qabul qilindi. Tez orada operatorlarimiz siz bilan bog'lanishadi.",
            ok: "Yaxshi",
            search_products: "Mahsulot qidirish... (masalan: #o'yinchoq, #kiyim)",
            for_children: "Bolalar uchun",
            best_products: "Eng Yaxshi",
            products: "Mahsulotlar",
            hero_description: "100+ dan ortiq sifatli o'yinchoq va bolalar ehtiyojlari",
            start_shopping: "Xarid qilishni boshlash",
            customer_rating: "Mijozlar baholari",
            reviews: "baholash",
            our_results: "Bizning Natijalarmiz",
            total_orders: "Buyurtmalar soni",
            products_count: "Mahsulotlar soni",
            customer_service: "Mijozlar xizmati",
            quality_guarantee: "Sifat kafolati",
            all: "Barchasi",
            baby_products: "Chaqaloq mahsulotlari",
            toys: "O'yinchoqlar",
            clothing: "Kiyimlar",
            care: "Parvarish",
            our: "Bizning",
            loading_products: "Mahsulotlar yuklanmoqda...",
            footer_description: "Bolalar uchun eng sifatli va xavfsiz mahsulotlar. Har bir oilaning baxtiga hissa qo'shamiz.",
            quick_links: "Tezkor havolalar",
            home: "Bosh sahifa",
            contact: "Aloqa",
            categories: "Kategoriyalar",
            all_rights_reserved: "Barcha huquqlar himoyalangan."
        },
        en: {
            rate_service: "Rate Our Service",
            rate_experience: "Please rate our service:",
            submit_rating: "Submit Rating",
            cart: "Cart",
            cart_empty: "Cart is empty",
            checkout: "Checkout",
            fill_details: "Fill Details",
            full_name: "Full Name *",
            enter_full_name: "Enter your full name",
            phone_number: "Phone Number *",
            region: "Region/Address *",
            select_region: "Select region",
            additional_notes: "Additional Notes",
            enter_address_details: "Enter your address details!",
            order_details: "Order Details:",
            total_amount: "Total Amount:",
            place_order: "Place Order",
            order_successful: "Order Successful!",
            thank_you: "Thank You!",
            order_received: "Your order has been received. Our operators will contact you soon.",
            ok: "OK",
            search_products: "Search products... (e.g., #toys, #clothing)",
            for_children: "For Children",
            best_products: "Best",
            products: "Products",
            hero_description: "100+ quality toys and children's needs",
            start_shopping: "Start Shopping",
            customer_rating: "Customer Ratings",
            reviews: "reviews",
            our_results: "Our Results",
            total_orders: "Total Orders",
            products_count: "Products Count",
            customer_service: "Customer Service",
            quality_guarantee: "Quality Guarantee",
            all: "All",
            baby_products: "Baby Products",
            toys: "Toys",
            clothing: "Clothing",
            care: "Care",
            our: "Our",
            loading_products: "Loading products...",
            footer_description: "The highest quality and safest products for children. We contribute to the happiness of every family.",
            quick_links: "Quick Links",
            home: "Home",
            contact: "Contact",
            categories: "Categories",
            all_rights_reserved: "All rights reserved."
        },
        ru: {
            rate_service: "Оценить Сервис",
            rate_experience: "Пожалуйста, оцените наш сервис:",
            submit_rating: "Отправить Оценку",
            cart: "Корзина",
            cart_empty: "Корзина пуста",
            checkout: "Оформить заказ",
            fill_details: "Заполнить Данные",
            full_name: "Полное Имя *",
            enter_full_name: "Введите ваше полное имя",
            phone_number: "Номер Телефона *",
            region: "Регион/Адрес *",
            select_region: "Выберите регион",
            additional_notes: "Дополнительные Заметки",
            enter_address_details: "Введите детали адреса!",
            order_details: "Детали Заказа:",
            total_amount: "Общая Сумма:",
            place_order: "Разместить Заказ",
            order_successful: "Заказ Успешен!",
            thank_you: "Спасибо!",
            order_received: "Ваш заказ получен. Наши операторы свяжутся с вами в ближайшее время.",
            ok: "OK",
            search_products: "Поиск товаров... (например, #игрушки, #одежда)",
            for_children: "Для Детей",
            best_products: "Лучшие",
            products: "Товары",
            hero_description: "100+ качественных игрушек и детских потребностей",
            start_shopping: "Начать Покупки",
            customer_rating: "Рейтинги Клиентов",
            reviews: "отзывов",
            our_results: "Наши Результаты",
            total_orders: "Всего Заказов",
            products_count: "Количество Товаров",
            customer_service: "Служба Клиентов",
            quality_guarantee: "Гарантия Качества",
            all: "Все",
            baby_products: "Детские Товары",
            toys: "Игрушки",
            clothing: "Одежда",
            care: "Уход",
            our: "Наши",
            loading_products: "Загрузка товаров...",
            footer_description: "Самые качественные и безопасные товары для детей. Мы способствуем счастью каждой семьи.",
            quick_links: "Быстрые Ссылки",
            home: "Главная",
            contact: "Контакт",
            categories: "Категории",
            all_rights_reserved: "Все права защищены."
        }
    };

    // DOM Elements
    const productsGrid = document.getElementById('productsGrid');
    const loadingEl = document.getElementById('loading');
    const cartCount = document.getElementById('cartCount');
    const cartBtn = document.getElementById('cartBtn');
    const cartOverlay = document.getElementById('cartOverlay');
    const cartSidebar = document.getElementById('cartSidebar');
    const closeCart = document.getElementById('closeCart');
    const cartItems = document.getElementById('cartItems');
    const cartFooter = document.getElementById('cartFooter');
    const cartTotal = document.getElementById('cartTotal');
    const checkoutBtn = document.getElementById('checkoutBtn');
    const checkoutModal = document.getElementById('checkoutModal');
    const closeCheckout = document.getElementById('closeCheckout');
    const successModal = document.getElementById('successModal');
    const closeSuccess = document.getElementById('closeSuccess');
    const successOk = document.getElementById('successOk');
    const searchInput = document.getElementById('searchInput');
    const searchBtn = document.getElementById('searchBtn');
    const totalOrdersEl = document.getElementById('totalOrders');
    const mobileCategorySelect = document.getElementById('mobileCategorySelect');
    const ratingModal = document.getElementById('ratingModal');
    const closeRating = document.getElementById('closeRating');
    const ratingInput = document.getElementById('ratingInput');
    const submitRating = document.getElementById('submitRating');
    const averageRating = document.getElementById('averageRating');
    const displayStars = document.getElementById('displayStars');
    const ratingCount = document.getElementById('ratingCount');
    const themeToggle = document.getElementById('themeToggle');
    const themeIcon = document.getElementById('themeIcon');
    const languageSelector = document.getElementById('languageSelector');
    const currentLang = document.getElementById('currentLang');

    // Load saved data
    orderCount = parseInt(localStorage.getItem('orderCount')) || 0;
    ratingData = JSON.parse(localStorage.getItem('ratingData')) || { total: 0, count: 0 };
    currentLanguage = localStorage.getItem('language') || 'uz';
    darkMode = localStorage.getItem('darkMode') === 'true';

    // Initialize theme
    if (darkMode) {
        document.documentElement.setAttribute('data-theme', 'dark');
        themeIcon.className = 'fas fa-sun';
    }

    // Update displays
    totalOrdersEl.textContent = orderCount;
    updateRatingDisplay();
    updateLanguageDisplay();

    // Translation function
    function translate() {
        const elements = document.querySelectorAll('[data-translate]');
        elements.forEach(el => {
            const key = el.getAttribute('data-translate');
            if (translations[currentLanguage] && translations[currentLanguage][key]) {
                el.textContent = translations[currentLanguage][key];
            }
        });

        const placeholderElements = document.querySelectorAll('[data-translate-placeholder]');
        placeholderElements.forEach(el => {
            const key = el.getAttribute('data-translate-placeholder');
            if (translations[currentLanguage] && translations[currentLanguage][key]) {
                el.placeholder = translations[currentLanguage][key];
            }
        });
    }

    // Load categories from Firebase
    async function loadCategoriesFromFirebase() {
        try {
            const snapshot = await getDocs(collection(db, 'options'));
            if (!snapshot.empty) {
                snapshot.forEach(doc => {
                    const data = doc.data();
                    if (doc.id === 'gqAYmYyMen1B86JgSlrex') {
                        categories = data.options || [];
                        updateCategoryButtons();
                    }
                });
            }
        } catch (error) {
            console.error("Firebase'dan kategoriyalarni yuklashda xato:", error);
        }
    }

    // Update category buttons
    function updateCategoryButtons() {
        const categoryFilters = document.querySelector('.category-filters');
        const mobileCategorySelect = document.getElementById('mobileCategorySelect');
        
        if (categories.length > 0) {
            // Desktop buttons
            categoryFilters.innerHTML = `
                <button class="category-btn active" data-category="all">
                    <i class="fas fa-th-large"></i>
                    <span data-translate="all">Barchasi</span>
                </button>
            `;
            
            // Mobile select
            mobileCategorySelect.innerHTML = '<option value="all" data-translate="all">Barchasi</option>';
            
            categories.forEach(category => {
                const categorySlug = category.toLowerCase().replace(/\s+/g, '');
                const iconClass = getCategoryIcon(category);
                
                // Desktop button
                categoryFilters.innerHTML += `
                    <button class="category-btn" data-category="${categorySlug}">
                        <i class="${iconClass}"></i>
                        ${category}
                    </button>
                `;
                
                // Mobile option
                mobileCategorySelect.innerHTML += `<option value="${categorySlug}">${category}</option>`;
            });
            
            // Re-attach event listeners
            attachCategoryListeners();
        }
    }

    // Get category icon
    function getCategoryIcon(category) {
        const iconMap = {
            'chaqaloq': 'fas fa-baby',
            'o\'yinchoq': 'fas fa-gamepad',
            'kiyim': 'fas fa-tshirt',
            'parvarish': 'fas fa-heart',
            'baby': 'fas fa-baby',
            'toys': 'fas fa-gamepad',
            'clothing': 'fas fa-tshirt',
            'care': 'fas fa-heart'
        };
        
        const lowerCategory = category.toLowerCase();
        for (const [key, icon] of Object.entries(iconMap)) {
            if (lowerCategory.includes(key)) {
                return icon;
            }
        }
        return 'fas fa-box';
    }

    // Attach category event listeners
    function attachCategoryListeners() {
        document.querySelectorAll('.category-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentCategory = btn.dataset.category;
                renderProducts();
            });
        });
    }

    // Load products from Firebase
    async function loadProductsFromFirebase() {
        try {
            const snapshot = await getDocs(collection(db, 'products'));
            if (snapshot.empty) {
                productsGrid.innerHTML = '<p style="text-align: center; color: #666; padding: 40px;">Hozirda mahsulot yo\'q</p>';
                loadingEl.style.display = 'none';
                return;
            }

            products = [];
            snapshot.forEach(doc => {
                const product = doc.data();
                product.id = doc.id;
                products.push(product);
            });
            
            document.getElementById('totalProducts').textContent = products.length + '+';
            renderProducts();
        } catch (error) {
            console.error("Firebase'dan yuklashda xato:", error);
            productsGrid.innerHTML = '<p style="text-align: center; color: #e74c3c; padding: 40px;">Mahsulotlarni yuklab bo\'lmadi</p>';
            loadingEl.style.display = 'none';
        }
    }

    // Render products
    function renderProducts() {
        if (!productsGrid) return;

        loadingEl.style.display = 'block';
        productsGrid.innerHTML = '';

        const filtered = products.filter(p => {
            const categoryMatch = currentCategory === 'all' || p.category === currentCategory;
            const searchMatch = !searchQuery || 
                p.name.toLowerCase().includes(searchQuery.toLowerCase()) ||
                (p.tags && p.tags.some(tag => tag.toLowerCase().includes(searchQuery.toLowerCase())));
            return categoryMatch && searchMatch;
        });

        if (filtered.length === 0) {
            productsGrid.innerHTML = '<p style="text-align: center; color: #666; padding: 40px;">Mahsulot topilmadi</p>';
            loadingEl.style.display = 'none';
            return;
        }

        filtered.forEach(product => {
            const card = document.createElement('div');
            card.className = 'product-card fade-in';
            card.innerHTML = `
                <div style="position: relative;">
                    <img src="${product.image || 'https://via.placeholder.com/400x400?text=Mahsulot'}" alt="${product.name}" class="product-image" loading="lazy">
                    <div class="product-id">#${product.id}</div>
                </div>
                <div class="product-info">
                    <h3 class="product-name">${product.name}</h3>
                    <div class="product-tags">
                        ${product.tags ? product.tags.map(tag => `<span class="product-tag">${tag}</span>`).join('') : ''}
                    </div>
                    <div class="product-footer">
                        <span class="product-price">${product.price ? product.price.toLocaleString() : '0'} so'm</span>
                        <button class="add-to-cart" onclick="addToCart('${product.id}')">
                            <i class="fas fa-plus"></i> Qo'shish
                        </button>
                    </div>
                </div>
            `;
            productsGrid.appendChild(card);
        });

        loadingEl.style.display = 'none';
    }

    // Add to cart
    window.addToCart = function(productId) {
        const product = products.find(p => p.id === productId);
        if (!product) return;

        const existingItem = cart.find(item => item.id === productId);
        if (existingItem) {
            existingItem.quantity++;
        } else {
            cart.push({ ...product, quantity: 1 });
        }

        updateCartDisplay();
        renderCart();
        showNotification(`${product.name} savatga qo'shildi!`);
    }

    // Update cart display
    function updateCartDisplay() {
        const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
        cartCount.textContent = totalItems;
        cartCount.style.display = totalItems > 0 ? 'flex' : 'none';
    }

    // Show notification
    function showNotification(message) {
        const notification = document.createElement('div');
        notification.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--primary-pink);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            z-index: 4000;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            animation: slideIn 0.3s ease-out;
        `;
        notification.textContent = message;
        document.body.appendChild(notification);

        setTimeout(() => {
            notification.style.animation = 'slideOut 0.3s ease-in';
            setTimeout(() => notification.remove(), 300);
        }, 3000);
    }

    // Toggle cart
    function toggleCart() {
        cartOverlay.classList.toggle('show');
        cartSidebar.classList.toggle('open');
        if (cartOverlay.classList.contains('show')) {
            renderCart();
        }
    }

    // Render cart
    function renderCart() {
        if (!cartItems || !cartFooter || !cartTotal) return;

        if (cart.length === 0) {
            cartItems.innerHTML = `
                <div class="empty-cart">
                    <i class="fas fa-shopping-bag"></i>
                    <p data-translate="cart_empty">Savatcha bo'sh</p>
                </div>
            `;
            cartFooter.style.display = 'none';
            return;
        }

        let totalPrice = 0;
        cartItems.innerHTML = '';

        cart.forEach(item => {
            totalPrice += (item.price || 0) * item.quantity;
            
            const cartItem = document.createElement('div');
            cartItem.className = 'cart-item';
            cartItem.innerHTML = `
                <img src="${item.image || 'https://via.placeholder.com/60x60?text=IMG'}" alt="${item.name}" class="cart-item-image" loading="lazy">
                <div class="cart-item-info">
                    <div class="cart-item-name">${item.name}</div>
                    <div class="cart-item-price">${(item.price || 0).toLocaleString()} so'm</div>
                    <div class="quantity-controls">
                        <button class="quantity-btn" onclick="updateQuantity('${item.id}', -1)">
                            <i class="fas fa-minus"></i>
                        </button>
                        <span class="quantity">${item.quantity}</span>
                        <button class="quantity-btn" onclick="updateQuantity('${item.id}', 1)">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                </div>
                <button class="remove-item" onclick="removeFromCart('${item.id}')">
                    <i class="fas fa-trash"></i>
                </button>
            `;
            cartItems.appendChild(cartItem);
        });

        cartTotal.textContent = `Jami: ${totalPrice.toLocaleString()} so'm`;
        cartFooter.style.display = 'block';
    }

    // Update quantity
    window.updateQuantity = function(productId, change) {
        const item = cart.find(item => item.id === productId);
        if (!item) return;

        item.quantity += change;
        if (item.quantity <= 0) {
            cart = cart.filter(i => i.id !== productId);
        }

        updateCartDisplay();
        renderCart();
    }

    // Remove from cart
    window.removeFromCart = function(productId) {
        cart = cart.filter(item => item.id !== productId);
        updateCartDisplay();
        renderCart();
    }

    // Open checkout modal
    function openCheckoutModal() {
        if (cart.length === 0) {
            alert('Savatcha bo\'sh!');
            return;
        }
        toggleCart();
        ratingModal.classList.add('show');
    }

    // Open real checkout after rating
    function openRealCheckout() {
        checkoutModal.classList.add('show');
        renderOrderSummary();
    }

    // Render order summary
    function renderOrderSummary() {
        const orderSummary = document.getElementById('orderSummary');
        const orderTotal = document.getElementById('orderTotal');
        if (!orderSummary || !orderTotal) return;

        let totalPrice = 0;
        orderSummary.innerHTML = cart.map(item => {
            const itemTotal = (item.price || 0) * item.quantity;
            totalPrice += itemTotal;
            return `<div class="summary-item"><span>${item.name} x${item.quantity}</span><span>${itemTotal.toLocaleString()} so'm</span></div>`;
        }).join('');

        orderTotal.textContent = `${totalPrice.toLocaleString()} so'm`;
    }

    // Handle search
    function handleSearch() {
        searchQuery = searchInput.value.trim();
        renderProducts();
    }

    // Scroll to products
    window.scrollToProducts = function() {
        document.getElementById('products').scrollIntoView({ behavior: 'smooth' });
    }

    // Rating functions
    function updateRatingDisplay() {
        if (ratingData.count > 0) {
            const average = (ratingData.total / ratingData.count).toFixed(1);
            averageRating.textContent = average;
            
            const fullStars = Math.floor(average);
            const hasHalfStar = average % 1 >= 0.5;
            
            let starsHTML = '';
            for (let i = 0; i < fullStars; i++) {
                starsHTML += '⭐';
            }
            if (hasHalfStar) {
                starsHTML += '⭐';
            }
            
            displayStars.textContent = starsHTML;
            ratingCount.innerHTML = `(${ratingData.count} <span data-translate="reviews">baholash</span>)`;
        } else {
            averageRating.textContent = '5.0';
            displayStars.textContent = '⭐⭐⭐⭐⭐';
            ratingCount.innerHTML = '(0 <span data-translate="reviews">baholash</span>)';
        }
    }

    function updateLanguageDisplay() {
        const langMap = {
            'uz': '🇺🇿 UZ',
            'en': '🇺🇸 EN', 
            'ru': '🇷🇺 RU'
        };
        currentLang.textContent = langMap[currentLanguage] || '🇺🇿 UZ';
    }

    // Event Listeners
    cartBtn.addEventListener('click', toggleCart);
    closeCart.addEventListener('click', toggleCart);
    cartOverlay.addEventListener('click', (e) => {
        if (e.target === cartOverlay) toggleCart();
    });
    
    checkoutBtn.addEventListener('click', openCheckoutModal);
    closeCheckout.addEventListener('click', () => {
        checkoutModal.classList.remove('show');
    });
    
    closeSuccess.addEventListener('click', () => {
        successModal.classList.remove('show');
        location.reload(); // Reload page to return to main site
    });
    successOk.addEventListener('click', () => {
        successModal.classList.remove('show');
        location.reload(); // Reload page to return to main site
    });

    // Rating modal events
    closeRating.addEventListener('click', () => {
        ratingModal.classList.remove('show');
    });

    ratingInput.addEventListener('click', (e) => {
        if (e.target.classList.contains('star')) {
            currentRating = parseInt(e.target.dataset.rating);
            updateRatingStars();
        }
    });

    function updateRatingStars() {
        const stars = ratingInput.querySelectorAll('.star');
        stars.forEach((star, index) => {
            if (index < currentRating) {
                star.classList.add('active');
            } else {
                star.classList.remove('active');
            }
        });
    }

    submitRating.addEventListener('click', () => {
        if (currentRating > 0) {
            ratingData.total += currentRating;
            ratingData.count += 1;
            localStorage.setItem('ratingData', JSON.stringify(ratingData));
            updateRatingDisplay();
            ratingModal.classList.remove('show');
            openRealCheckout();
        } else {
            alert('Iltimos, baholang!');
        }
    });

    // Theme toggle
    themeToggle.addEventListener('click', () => {
        darkMode = !darkMode;
        localStorage.setItem('darkMode', darkMode.toString());
        
        if (darkMode) {
            document.documentElement.setAttribute('data-theme', 'dark');
            themeIcon.className = 'fas fa-sun';
        } else {
            document.documentElement.removeAttribute('data-theme');
            themeIcon.className = 'fas fa-moon';
        }
    });

    // Language selector
    languageSelector.addEventListener('click', () => {
        const languages = ['uz', 'en', 'ru'];
        const currentIndex = languages.indexOf(currentLanguage);
        const nextIndex = (currentIndex + 1) % languages.length;
        currentLanguage = languages[nextIndex];
        
        localStorage.setItem('language', currentLanguage);
        updateLanguageDisplay();
        translate();
    });

    // Mobile category select
    mobileCategorySelect.addEventListener('change', (e) => {
        currentCategory = e.target.value;
        renderProducts();
    });

    // Search events
    searchInput.addEventListener('input', handleSearch);
    searchBtn.addEventListener('click', handleSearch);
    searchInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') handleSearch();
    });

    // Submit order
    document.getElementById('checkoutForm').addEventListener('submit', async function(e) {
        e.preventDefault();

        const customerName = document.getElementById('customerName').value.trim();
        const customerPhone = document.getElementById('customerPhone').value.trim();
        const customerRegion = document.getElementById('customerRegion').value.trim();
        const customerNotes = document.getElementById('customerNotes').value.trim();

        if (!customerName || !customerPhone || !customerRegion) {
            alert("Iltimos, barcha majburiy maydonlarni to'ldiring!");
            return;
        }

        if (cart.length === 0) {
            alert("Savatcha bo'sh!");
            return;
        }

        const botToken = '7720932235:AAHp74Ga9bOrXh-HbinCxKE-bFWynlxWDqA';
        const chatIds = ['5717695158', '1541822517'];

        const totalPrice = cart.reduce((sum, item) => sum + ((item.price || 0) * item.quantity), 0);
        const orderItems = cart.map(item => 
            `${item.name} x${item.quantity} — ${((item.price || 0) * item.quantity).toLocaleString()} so'm`
        ).join('\n');

        const orderMessage = `🛍️ YANGI BUYURTMA:

👤 Mijoz: ${customerName}
📞 Telefon: ${customerPhone}  
📍 Hudud: ${customerRegion}
⭐ Baholash: ${currentRating}/5

📦 Buyurtma:
${orderItems}

💰 Jami summa: ${totalPrice.toLocaleString()} so'm

📝 Qo'shimcha: ${customerNotes || 'Yo\'q'}`;

        try {
            const sendPromises = chatIds.map(chatId =>
                fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        chat_id: chatId,
                        text: orderMessage,
                        parse_mode: 'HTML'
                    })
                })
            );

            const responses = await Promise.all(sendPromises);
            
            const allSent = responses.every(response => response.ok);
            
            if (allSent) {
                orderCount++;
                localStorage.setItem('orderCount', orderCount.toString());
                totalOrdersEl.textContent = orderCount;

                cart = [];
                updateCartDisplay();
                
                checkoutModal.classList.remove('show');
                successModal.classList.add('show');
                
                document.getElementById('checkoutForm').reset();
                currentRating = 0;
            } else {
                throw new Error('Some messages failed to send');
            }
        } catch (error) {
            console.error('Telegram yuborishda xato:', error);
            alert('Buyurtma yuborishda xatolik yuz berdi. Qaytadan urinib ko\'ring yoki telefon orqali bog\'laning.');
        }
    });

    // Initialize app
    document.addEventListener('DOMContentLoaded', () => {
        loadCategoriesFromFirebase();
        loadProductsFromFirebase();
        updateCartDisplay();
        updateRatingDisplay();
        updateLanguageDisplay();
        translate();
    });
</script>
</body>
</html>
